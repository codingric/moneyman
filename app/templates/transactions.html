{% extends "_base.html" %}
{% block main %}
<style>
  .transaction div {
    display: table-cell;
  }
</style>
<h2>Spending since {{start_date}}</h2>
{% if request.args.get('tag') %}
<a href="{{url_for("transactions")}}">Clear filter</a>
{% endif %}
<table class="pure-table">
<thead>
<tr>
  <th>Date</th>
  <th>Account</th>
  <th>Description</th>
  <th>Amount</th>
  <th>Tags</th>
</tr>
</thead>
<tbody>
{% for t in transactions %}
<tr>
  <td>{{ t['date'] }}</td>
  <td>{{ t['account_name'] }}</td>
  <td>{{ t['description'] }}</td>
  <td>{{ "${:,.2f}".format(t['amount']) }}</td>
  <td>
    <div class="editable">
      <a name="trans{{ t['id'] }}" />
      <span class="read">{{ t['tag'] or 'No Tag' }}</span>
      <form class="write" method="POST">
        <input type="hidden" name="trans_id" value="{{t['id']}}"/>
        <input type="hidden" name="_csrf_token" value="{{csrf_token()}}"/>
        <input class="submitter" type="text" name="tag" value="{{t['tag'] or ''}}"/>
      </form>
    </div>
  </td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
