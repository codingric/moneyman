{% extends "_base.html" %}
{% block menu %}
  <a href="{{ url_for('index') }}">Report</a>
  <a href="{{ url_for('upload') }}">Import</a>
{% endblock %}
{% block main %}
<style>
  .transaction div {
    display: table-cell;
  }
</style>
<h2>Spending since {{start_date}}</h2>
{% if request.args.get('tag') %}
<a href="{{url_for("transactions")}}">Clear filter</a>
{% endif %}
<table>
<tr>
  <th>Date</th>
  <th>Account</th>
  <th>Description</th>
  <th>Amount</th>
  <th>Tags</th>
</tr>
{% for t in transactions %}
<tr>
  <td>{{ t['date'] }}</td>
  <td>{{ t['account_name'] }}</td>
  <td>{{ t['description'] }}</td>
  <td>{{ "${:,.2f}".format(t['amount']) }}</td>
  <td>
    <a class="clicktoshow" name="trans{{ t['id'] }}" onclick="this.className=''">
      {{ t['tag'] or 'No Tag' }}
      <form method="POST">
        <input type="hidden" name="trans_id" value="{{t['id']}}"/>
        <input type="hidden" name="_csrf_token" value="{{csrf_token()}}"/>
        <input type="test" name="tag"/>
        <input type="submit" value="update"/>
      </form>
    </a>
  </td>
</tr>
{% endfor %}
</table>
<style>
a.clicktoshow form {
  display: none;
}
</style>
{% endblock %}
